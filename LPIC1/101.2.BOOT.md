# BOOT

The boot process:

1. Firmware of Motherboard will be run POST (Power On Self Test).
2. Bootloader will be loaded by Motherboard. It just loads the thing inside of a specific address (here is the Bootloader).
3. Kernel will be loaded by Bootloader.
4. Kernel loads the system (root filesystem) and loads the init porgram.
5. Init program loads all other programs and services.

Splitting the process helps to have safer and faster boot.

### BIOS

- older
- can just load one sector of the disk (with MVR).

### UEFI

- No limit to MBR.
- EFI System Partition (ESP) loads the Bootloader.
- If the computer is loaded by UEFI, we have this file: `/sys/firmware/efi`

### Bootloader

It loads the OS.

Some bootlaoders:

- GRUB1
- GRUB2

### Kernel

Before loading the disk, Kernel writes the logs in Kernel Ring Buffer. We can see these logs with `dmesg` (the logs we can see between booting and loading the GUI of OS). also inside of `/var/log/dmesg` and here: `/var/log/boot.log`

```bash
sudo dmesg | less

journalctl -k # show dmesg info
journalctl -b # show dmesg info
```

### init

Several init systems:

- sysVinit: the old one
- upstart
- systemd: most popular by dists.

```bash
which init # /usr/sbin/init
ls -ltrh /usr/sbin/init # goes to systemd at the end

pstree # tree of all processes. cool! All the systems are now up by systemd based on the tree.
```

### systemd

Work with many units. The main command to work with systemd: `systemctl`

```bash
systemctl list-units # shows all units
systemctl list-units --type=service
systemctl get-default

systemctl cat cups # shows inside of the file

cd usr/lib/systemd/system # our familiar services

systemctl status sshd # status of a service
systemctl start sshd # start the service
systemctl stop sshd # stop the service
systemctl restart sshd
sysyemctl reload sshd
sysyemctl daemon-reload sshd # reload the config that changed inside systemd
syatemctl enable sshd # enable the service everytime system is loaded
syatemctl disable sshd
```
